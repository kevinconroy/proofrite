<?xml version="1.0"?>
<!DOCTYPE abiword PUBLIC "-//ABISOURCE//DTD AWML 1.0 Strict//EN" "http://www.abisource.com/awml.dtd">
<abiword xmlns="http://www.abisource.com/awml.dtd" xmlns:awml="http://www.abisource.com/awml.dtd" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svg="http://www.w3.org/2000/svg" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:dc="http://purl.org/dc/elements/1.1/" version="1.0.1" fileformat="1.0" styles="unlocked">
<!-- =====================================================================  -->
<!-- This file is an AbiWord document.                                      -->
<!-- AbiWord is a free, Open Source word processor.                         -->
<!-- You may obtain more information about AbiWord at www.abisource.com     -->
<!-- You should not edit this file by hand.                                 -->
<!-- =====================================================================  -->

<styles>
<s type="P" name="Heading 1" basedon="Normal" followedby="Normal" props="keep-with-next:1; font-size:17pt; field-font:NULL; margin-bottom:0.0417in; line-height:1.000000; font-weight:bold; font-family:Arial; margin-top:0.3056in"/>
<s type="P" name="Normal" basedon="" followedby="Current Settings" props="text-indent:0in; field-font:NULL; margin-top:0.0694in; margin-left:0pt; font-stretch:normal; line-height:1.000000; text-align:left; bgcolor:transparent; dom-dir:ltr; margin-bottom:0.0694in; font-weight:normal; text-decoration:none; font-variant:normal; color:000000; text-position:normal; font-size:10pt; margin-right:0pt; font-style:normal; widows:2; font-family:Arial"/>
<s type="P" name="Heading 2" basedon="Normal" followedby="Normal" props="keep-with-next:1; font-size:14pt; field-font:NULL; margin-bottom:0.0417in; line-height:1.000000; font-weight:bold; font-family:Arial; margin-top:0.3056in"/>
<s type="P" name="Heading 3" basedon="Normal" followedby="Normal" props="keep-with-next:1; font-size:12pt; field-font:NULL; margin-bottom:0.0417in; line-height:1.000000; font-weight:bold; font-family:Arial; margin-top:0.3056in"/>
<s type="P" name="Heading 4" basedon="None" followedby="Normal" props="default-tab-interval:0.5in; text-indent:0in; width:0in; margin-top:0in; orphans:1; margin-left:0in; line-height:1.0; height:0in; text-align:left; lang:en-US; dom-dir:ltr; margin-bottom:0in; font-weight:normal; text-decoration:none; bgcolor:transparent; color:000000; text-position:normal; margin-right:0in; font-style:normal; widows:2"/>
<s followedby="Normal" name="Address" basedon="Normal" type="P" props="line-height:1.000000; font-style:normal"/>
<s type="P" name="Blockquote" basedon="Normal" props="margin-top:0.0694in; line-height:1.000000; margin-bottom:0.0694in; margin-left:0.2500in; margin-right:0.2500in"/>
<s type="P" name="CITE" props="line-height:1.000000; font-style:normal"/>
<s type="P" name="CODE" props="line-height:1.000000; font-family:Courier New; font-size:10pt"/>
<s type="P" name="Comment" props="line-height:1.000000"/>
<s type="P" name="Default Paragraph Font" props="line-height:1.000000; color:000000"/>
<s type="P" name="Definition" props="line-height:1.000000; font-style:normal"/>
<s followedby="Definition Term" name="Definition List" basedon="Normal" type="P" props="line-height:1.000000; margin-left:0.2500in"/>
<s followedby="Definition List" name="Definition Term" basedon="Normal" type="P" props="line-height:1.000000"/>
<s type="P" name="Emphasis" props="; text-decoration:none; line-height:1.000000; font-style:normal"/>
<s type="P" name="FollowedHyperlink" props="; text-decoration:underline ; line-height:1.000000; color:800080"/>
<s followedby="Normal" name="H1" basedon="Normal" type="P" props="font-weight:normal; margin-top:0.0694in; line-height:1.000000; margin-bottom:0.0694in; font-size:24pt"/>
<s followedby="Normal" name="H2" basedon="Normal" type="P" props="font-weight:normal; margin-top:0.0694in; line-height:1.000000; margin-bottom:0.0694in; font-size:18pt"/>
<s followedby="Normal" name="H3" basedon="Normal" type="P" props="font-weight:normal; margin-top:0.0694in; line-height:1.000000; margin-bottom:0.0694in; font-size:14pt"/>
<s followedby="Normal" name="H4" basedon="Normal" type="P" props="font-weight:normal; margin-top:0.0694in; line-height:1.000000; margin-bottom:0.0694in; font-size:12pt"/>
<s followedby="Normal" name="H5" basedon="Normal" type="P" props="font-weight:normal; margin-top:0.0694in; line-height:1.000000; margin-bottom:0.0694in; font-size:10pt"/>
<s followedby="Normal" name="H6" basedon="Normal" type="P" props="font-weight:normal; margin-top:0.0694in; line-height:1.000000; margin-bottom:0.0694in; font-size:8pt"/>
<s type="P" name="HTML Markup" props="line-height:1.000000; color:ff0000"/>
<s type="P" name="Hyperlink" props="; text-decoration:underline ; line-height:1.000000; color:0000ff"/>
<s type="P" name="Keyboard" props="font-size:10pt; font-weight:normal; font-family:Courier New; line-height:1.000000"/>
<s type="P" name="Preformatted" basedon="Normal" props="line-height:1.000000; margin-top:0.0000in; tabstops:0.000000in/L0,0.665972in/L0,1.331944in/L0,1.997917in/L0,2.663889in/L0,3.329861in/L0,3.995833in/L0,4.661806in/L0,5.327778in/L0,5.993750in/L0,6.659722in/L0; margin-bottom:0.0000in; font-family:Courier New; font-size:10pt"/>
<s type="P" name="Sample" props="font-family:Courier New; line-height:1.000000"/>
<s type="P" name="Strong" props="line-height:1.000000; font-weight:normal"/>
<s type="P" name="Typewriter" props="line-height:1.000000; font-family:Courier New; font-size:10pt"/>
<s type="P" name="Variable" props="line-height:1.000000; font-style:normal"/>
<s followedby="Normal" name="z-Bottom of Form" type="P" props="line-height:1.000000; font-family:Arial; font-size:8pt"/>
<s followedby="Normal" name="z-Top of Form" type="P" props="line-height:1.000000; font-family:Arial; font-size:8pt"/>
</styles>
<lists>
<l id="861126605" parentid="0" type="5" start-value="0" list-delim="%L" list-decimal="NULL"/>
</lists>
<pagesize pagetype="Custom" orientation="portrait" width="8.268750" height="11.688889" units="in" page-scale="1.000000"/>
<section>
<p style="Heading 1" props="text-align:center"><c props="lang:pl-PL"></c><c props="lang:en-US">Czcionki w Uniksie i AbiWordzie -- <br/>Unix Fonts and AbiWord</c></p>
<p style="Normal" props="text-align:center"><c props="font-style:italic; lang:en-US">Tomas Frydrych &lt;tomas@frydrych.uklinux.net&gt;</c><c props="font-style:italic; lang:en-US"></c></p>
<p style="Heading 2"><c props="lang:en-US">Table of Contents</c><c props="lang:en-US"></c></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">	</c><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><a xlink:href="#intro"><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt">Introduction</c></a></p>
<p style="Normal" props="margin-top:6pt; font-size:12pt; font-family:Times New Roman"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">	</c><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><a xlink:href="#fonts"><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt">AbiWord's Font Requirements</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:11pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#unix_x"><c props="font-family:Times New Roman; font-size:11pt">Fonts in the Unix/X Environment</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:11pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#wysiwyg_needs"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">Needs of a WYSIWYG Word Processor</c></a></p>
<p style="Normal" props="margin-top:6pt; font-size:12pt; font-family:Times New Roman"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">	</c><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><a xlink:href="#adding_removing"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Adding and Removing AbiWord's Fonts</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:11pt"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">		</c><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><a xlink:href="#elem_procedure"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">The Elementary Procedure</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:11pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#pfa"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">pfa / pfb fonts</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="font-family:Times New Roman; font-size:10pt">			</c><c props="font-family:Times New Roman; font-size:10pt"></c><a xlink:href="#solaris"><c props="font-family:Times New Roman; font-size:10pt">Solaris Open Windows</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:11pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#ttf"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">TTF fonts</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:11pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#non_latin1"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">Locales Other than Latin-1</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:11pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#unicode"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">Unicode peculiarities</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:11pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#CJK_fonts"><c props="font-family:Times New Roman; font-size:11pt">Fonts with CJK Locales</c></a></p>
<p style="Normal" props="margin-top:6pt; font-size:12pt; font-family:Times New Roman"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">	</c><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><a xlink:href="#trouble"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">Trouble in Paradise</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#circles"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">My Fonts for Encoding XXX Print as Circles but Display Correctly</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#circles_screen"><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">When I Type I Get Small Circles on the Screen</c></a></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#font_mess"><c props="font-family:Times New Roman; font-size:11pt">"</c><c props="font-family:Times New Roman; font-size:11pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">Abiword Messes Up My Fonts"  Problem</c></a></p>
<p style="Normal" props="margin-top:0pt"><c props="font-family:Times New Roman; font-size:11pt">		</c><c props="font-family:Times New Roman; font-size:11pt"></c><a xlink:href="#keyboard"><c props="font-weight:normal; font-family:Times New Roman; font-size:11pt">Keyboard Related Problems</c></a></p>
<p style="Normal"></p>
<p style="Normal"></p>
<p style="Heading 2"><bookmark type="start" name="intro"/><bookmark type="end" name="intro"/><c props="lang:en-US">Introduction</c><c props="lang:en-US"></c></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">The way AbiWord handles fonts in the Unix environment has its own peculiarities, and is the single most common source of confusion, difficulties and frustration among the AbiWord users. The AbiWord developers are planning to redesign the font handling mechanism, but as this is a non-trivial task, it will </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">only </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">be done after the release of version 1.0. In the meantime, this document will outline the main aspects of AbiWord's font handling, the reasons behind it, and provide detailed instructions on font customization.</c></p>
<p style="Heading 2"><bookmark type="start" name="fonts"/><bookmark type="end" name="fonts"/><c props="lang:en-US">AbiWord's Font Requirements</c><c props="lang:en-US"></c></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">The way AbiWord uses fonts stems from two sets of limitation: the needs of a wysiwyg word processors and the nature of font management in the Unix/X environment.</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c></p>
<p style="Heading 3"><bookmark type="start" name="unix_x"/><bookmark type="end" name="unix_x"/><c props="lang:en-US">Fonts in the Unix/X Environment</c><c props="lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">For historical reasons, the way a Unix application displays its data on the screen, and the way it sends it to the printer are entirely different. The screen is accessed through the X display system, which provides a highly abstract way of handling fonts, allowing the application to use fonts of a variety of different types without having to know anything at all about them. This makes displaying text on the screen rather simple, but has some other drawbacks, as we will see in a moment.</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">In contrast, to print the application translates the document into the PostScript programming language and sends the PostScript program to the printer (or a PostScript interpreter that will translate it into code that the printer understands). While the PostScript language is extremely powerful, the way it handles fonts has nothing at all to do with the way the X system handles fonts. Basically, each font that the document requires needs to be embedded into the PostScript representation of the document, which means that the font must be in a format the PostScript language understands. Furthermore, because the PostScript language is designed to produce high quality printed documents, it works with a much higher resolution than the screen. In order to be able to produce the layout in the PostScript output, the application has to be able to retrieve the dimensions of the individual characters directly from the font (or more precisely, from the metrics file associated with it); it cannot just scale the dimensions it got from the X server for drawing on the screen, since this would result in unacceptable rounding errors.</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">Consequently, an application such as AbiWord can only use fonts that are both understood by the X display system and the PostScript language. In practice this means using either PostScript fonts (with the extensions .pfa or .pfb), or, with some additional preprocessing, TrueType fonts (the standard fonts in the Windows world, with the extension .ttf). It further has to be able to access the font files directly; unfortunately the abstract way in which X handles fonts hides the font details from the application, so that the application does not have direct access to these files, and needs to provide its own way of ensuring it can get to them. In AbiWord this is done by insisting that we will only use fonts that reside in a directory of our own choice (and AbiWord is not the only application that takes this path).</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">While having all the fonts in our font directory means that we can access them directly, in order to be able to use them for drawing on screen, we also have to register them with the X system. We have two options here: (1) we could insist that the user does this manually and permanently when s/he installs AbiWord; (2) we can do that automatically when AbiWord is run, for the length of the AbiWord session. The original developers choose the latter option, presumably to make AbiWord easier to install and use. Unfortunately this has some pitfalls. For one, registering the fonts with the X system is not that simple, and the automatic process can easily fail, and what's worse, what works on on one *nix, does not work on another. Further, if a font formally similar to the one AbiWord uses is already registered on the system, it can happen that when AbiWord is running other applications will start using the font supplied by AbiWord in its place. This has been a source of copious complaints from users, and the solution to this problem will be discussed </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><a xlink:href="#font_mess"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">later</c></a><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">.</c></p>
<p style="Heading 3"><bookmark type="start" name="wysiwyg_needs"/><bookmark type="end" name="wysiwyg_needs"/><c props="lang:en-US">Needs of a WYSIWYG Word Processor</c><c props="lang:en-US"></c></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">A layout application such as AbiWord has other requirements on its fonts that further narrow the fonts it can use and how it uses them.</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c></p>
<p style="Normal"></p>
<p level="1" listid="861126605" parentid="0" style="Normal" props="start-value:0; text-indent:-0.3000in; list-style:Bullet List; field-font:Symbol; margin-left:0.5000in"><field type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal"></field><c type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal">	</c><c type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">AbiWord needs that its fonts would be fully scalable</c></p>
<p level="1" listid="861126605" style="Normal" props="list-delim:%L; list-decimal:.; list-style:Bullet List; start-value:0; margin-left:0.5000in; text-indent:-0.3000in; field-font:Symbol"><field type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal"></field><c type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal">	</c><c type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">As a Unicode based application, AbiWord needs a way of handling fonts that contain more glyphs than the standard Unix 8-bit encoding provides, so that it can accommodate users who want to create multi-lingual documents. This requirement means that some font-handling techniques used by pure 8-bit applications cannot be used by AbiWord.</c></p>
<p level="1" listid="861126605" style="Normal" props="list-delim:%L; list-decimal:.; list-style:Bullet List; start-value:0; margin-left:0.5000in; text-indent:-0.3000in; field-font:Symbol"><field type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal"></field><c type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal">	</c><c type="list_label" props="width:0in; font-family:Times New Roman; font-style:normal; font-weight:bold; lang:en-US; color:000000; bgcolor:transparent; text-decoration:none; font-size:12pt; height:0in; text-position:normal"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">Because as the result of the above requirements AbiWord cannot use just any font, and because on a Unix/X based system we are not guaranteed to have fonts that AbiWord can make use of, AbiWord has to ensure it has at least basic fonts available. Since most word processor documents are created by people using MS Windows, and since Windows provides a standard set of fonts called Times New Roman, Arial, and Courier New, this was adopted as the basic AbiWord font set, and AbiWord provides versions of these fonts.</c></p>
<p style="Heading 2" props="keep-with-next:yes"><bookmark type="start" name="adding_removing"/><bookmark type="end" name="adding_removing"/><c props="lang:en-US">Adding and Removing AbiWord's Fonts</c><c props="lang:en-US"></c></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">As was explained in the previous section, AbiWord limits the fonts it makes available to the user to those located in its fonts directory (typically /usr/share/AbiSuite/fonts or /usr/local/AbiSuite/fonts, unless you chose different installation location) and in the </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><a xlink:href="#non_latin1"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">locale-specific sub-directories</c></a><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> of this directory, and it installs a basic set of fonts into this directory. This does not mean that you are limited to using these fonts; you can add new fonts and remove fonts you do not like or use. The fonts you can use with AbiWord are, however, limited to PostScript Type 1 fonts (pfa/pfb) and TrueType fonts (ttf).</c></p>
<p style="Heading 3"><bookmark type="start" name="elem_procedure"/><bookmark type="end" name="elem_procedure"/><bookmark type="start" name="strategy"/><bookmark type="end" name="strategy"/><c props="lang:en-US">The Elementary Procedure</c><c props="lang:en-US"></c></p>
<p style="Normal" props="font-size:12pt"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">If you wish to make an additional font available to AbiWord, you need to do the following:</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c></p>
<p style="Normal" props="font-size:12pt"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">(1) Place the font into the </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> directory</c></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">(2) Update the </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.dir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:normal"> and </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.scale</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> files. </c></p>
<p style="Normal"></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">Similarly, if you wish to remove a font, you simple remove it from the AbiWord font directory, and remove the entries from </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">the </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> and </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.scale</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> files.</c></p>
<p style="Normal"></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">The detailed procedure for adding pfa/pfb fonts and for ttf fonts is slightly different and is described below. Also note that the procedure is slightly more involved for non-Latin1 locales, with the details discussed later on, and if you are installing fonts for other than Latin 1 locale, you should read </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><a xlink:href="#non_latin1"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">Locales Other than Latin 1</c></a><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> first.</c></p>
<p style="Normal"></p>
<p style="Heading 3" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><bookmark type="start" name="pfa"/><bookmark type="end" name="pfa"/><c props="lang:en-US">pfa / pfb fonts</c><c props="lang:en-US"></c></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">Either copy the font file to the fonts directory, or create a symbolic link to it, if it is located elsewhere on your system. If your font came with a vendor provided afm file, you should copy or symlink it alongside the pfa/pfb file. If not AbiWord can generate the afm file automatically, but using a vendor provided afm file is preferable. Also, if any of the users who will be using AbiWord do not have write permission for the fonts directory, you have to provide the afm files (your sysadmin can generate them using the pfa2afm utility).</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c></p>
<p style="Heading 3" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">To update the </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.dir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> file, you should add an entry for the new font into </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.scale</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> and then either run </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">mkfontdir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">, or add exactly the same to </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.dir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> and increase the font count at the very top of the file accordingly. Your fonts probably came with a sample </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.dir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> or </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.scale</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> file, but if you do not know what the entry in the fonts.scale should be, you can generate it using the utility </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">ttmkfdir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> (please do not email the developer list asking how to use </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">ttmkfdir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">, see the documentation that comes with that program).</c></p>
<p style="Heading 3" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal"></p>
<p style="Normal"><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt">VERY IMPORTANT !!!</c><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">: Make sure that you not only modify the fonts.dir file, but that you also make appropriate changes to fonts.scale. On some systems the </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">mkfontdir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> utility can be executed automatically, and since this utility does not handle scalable fonts, it will truncate your </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.dir </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">file to 0 unless it can find </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.scale</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">, in which case it will just copy the contents of this file into the new </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.dir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">.</c></p>
<p style="Normal"><bookmark type="start" name="ttf"/><bookmark type="end" name="ttf"/></p>
<p style="Heading 4"><bookmark type="start" name="solaris"/><bookmark type="end" name="solaris"/><c props="font-weight:bold; font-family:Arial; font-size:11pt">Solaris Open Windows</c><c props="font-weight:bold; font-family:Arial; font-size:11pt"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; lang:en-US; text-position:normal; font-weight:normal; font-style:normal; text-decoration:none">Solaris Open Windows require an additional file to be created for the fonts directory called </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; lang:en-US; text-position:normal; font-weight:normal; font-style:normal; text-decoration:none"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; lang:en-US; text-position:normal; font-weight:normal; font-style:italic; text-decoration:none">PSres.upr</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; lang:en-US; text-position:normal; font-weight:normal; font-style:normal; text-decoration:none">. This file should be located in the directory into which you installed the fonts, and should be generated using </c><c props="font-family:Arial; font-size:11pt; color:000000; lang:en-US; text-position:normal; font-weight:normal; font-style:italic; text-decoration:none">/usr/openwin/bin/makepsres</c><c props="font-family:Arial; font-size:10pt; color:000000; lang:en-US; text-position:normal; font-weight:normal; font-style:normal; text-decoration:none"> </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; lang:en-US; text-position:normal; font-weight:normal; font-style:normal; text-decoration:none">program. This information was provided by </c><c props="font-family:Arial; font-size:11pt; color:000000; lang:en-US; text-position:normal; font-weight:normal; font-style:normal; text-decoration:none">Rene G. de Vries.</c></p>
<p style="Heading 3"><c props="lang:en-US">TTF fonts</c><c props="lang:en-US"></c></p>
<p style="Heading 3" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">** Currently TTF fonts are not supported by GnomePrint; if using Gnome</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">** build you have to print via 'Print Directly'.</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">** If you are installing TTF fonts for CJK locale, see </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><a xlink:href="#CJK_fonts"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">Fonts with CJK Locales</c></a><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:normal">, this section does not apply to CJK fonts.</c></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"></p>
<p style="Normal"><c props="font-family:Times New Roman; font-size:12pt">In order to be able to use TTF fonts with AbiWord, two conditions have to be satisfied: (1) your X server has to be able to handle TTF fonts and has to be configured to do so. </c><c props="font-family:Times New Roman; font-size:12pt"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">If it does not, you should consult your distribution documentation on how to set it up, please do not email the developer's list with questions how to do this. (2) Your PostScript interpreter has to be able to handle TTF fonts. Recent versions of GhostScript have this capability, but you need to enable it at compile time, and may need to make some changes to the GhostScript configuration file (see the GhostScript documentation). If you are using a genuine PostScript printer, then you need to consult your printer's documentation to see if it can handle Type 42 fonts; more recent printers should have this capability.</c></p>
<p style="Normal"> </p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt">The following instructions assume that the two conditions above are satisfied and that you are installing the fonts directly into the fonts directory. You should only do this if you are using Latin-1 locale; if you use a different locale, you should first see the section </c><c props="font-family:Times New Roman; font-size:12pt"></c><a xlink:href="#non_latin1"><c props="font-size:12pt; font-family:Times New Roman; font-style:italic">Locales Other than Latin 1</c></a><c props="font-family:Times New Roman; font-size:12pt"> below.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(1)</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Change into the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">AbiSuite</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> directory, usually, </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">/usr/share/AbiSuite</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">, or </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">/usr/local/AbiSuite</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# cd /usr/share/AbiSuite</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(2)</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> This directory contains a number of subdirectories, one of which is called </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> -- change into it.</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# cd fonts</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; lang:en-US; text-position:normal; font-weight:bold; font-style:normal; text-decoration:none">(3</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; lang:en-US; text-position:normal; font-weight:bold; font-style:normal; text-decoration:none"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">)</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> All fonts you want to use with AbiWord have to be copied or symbolically linked into here. In my case they are actually located on a Windows partition of my drive which is mounted under the directory /windows, so for the font Times New Roman I do</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# ln -s /windows/windows/fonts/times.ttf times.ttf</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">You have to do this for all fonts and all variants of each font you want use (i.e., timesb.ttf for the bold Times New Roman, etc).</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(4)</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Now you need to set up the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.scale</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> and </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> files for this directory. You will need the program </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">ttmkfdir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> for that, and you will find details of how to do that in the program’s documentation and your distribution’s documentation. Once these files have been generated, you should open them in a plain text editor. You will see that for each font there are multiple entries that differ only in the encoding specified at the very end of each line. Delete all lines that do not have the encoding of your locale, i.e., in our case delete all lines that do not end in </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">iso8859-1 </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">(note that there is a slight difference between the look of your LANG encoding [</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">ISO-8859-2</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">] and the encoding format used by the fonts.dir and fonts.scale files [</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">]; this is nothing to worry about).</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">VERY IMPORTANT</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">: Make sure that you not only modify the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> file, but that you also make appropriate changes to </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.scale</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">. On some systems the </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">mkfontdir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> utility can be executed automatically, and since this utility does not handle scalable fonts, it will truncate your </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> file to 0 unless it can find </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.scale</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">, in which case it will just copy the contents of this file into the new </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(5)</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Now change to the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">bin </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">subdirectory of the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">AbiSuite</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> directory, and execute the following command:</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# cd /usr/share/AbiSuite/bin</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# ./ttftool -e print</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">You will get back a list of encodings known to the ttftool program; check if your encoding is there (the encoding of your LANG and the encoding used by ttftool must correspond exactly, i.e., in our case we are looking for </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">ISO-8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">). </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">If your encoding is not there, all is not lost. Drop me an </c><a xlink:href="mailto:tomas@frydrych.uklinux.net"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">email</c></a><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">, and I will add it to the program, this is very simple to do.</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> If your encoding is there, then proceed to the next step.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(6)</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Now execute the following command, supplying the directory and encoding that are appropriate for your set up</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# ./ttfadmin.sh /usr/share/AbiSuite/fonts ISO-8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">The script </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">ttfadmin.sh </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">will call the program </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">ttftool </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">for each TTF font in your directory; there should not be any errors, providing you have the necessary permissions for the directory (but since you just created it, you should).</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(7)</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Switch to font directory and have a look at the contents</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# cd /usr/share/AbiSuite/fonts</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# ls</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">You should see three new files for each font file, one with extension .afm, one with extension .t42 and one with extension .u2g. That’s it. You are done. Start AbiWord, not forgetting to set the LANG variable beforehand </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><a xlink:href="#non_latin1"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">if necessary</c></a><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">.</c></p>
<p style="Heading 3"><bookmark type="start" name="non_latin1"/><bookmark type="end" name="non_latin1"/>Locales Other than Latin-1</p>
<p style="Normal"></p>
<p style="Normal"><c props="font-family:Times New Roman; font-size:12pt">** if you are installing fonts for a CJK locale, please go to the section </c><c props="font-family:Times New Roman; font-size:12pt"></c><a xlink:href="#CJK_fonts"><c props="font-size:12pt; font-family:Times New Roman; font-style:italic">Fonts for CJK Locales</c></a><c props="font-family:Times New Roman; font-size:12pt">.</c></p>
<p style="Normal"><c props="font-family:Times New Roman; font-size:12pt"></c></p>
<p style="Normal"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">If you are installing a font for a different encoding than iso8859-1, things are slightly more complicated. First of all, you should be installing the font into a subdirectory of the fonts directory named after the locale encoding. For instance if you are going to use Hebrew locale, you create a directory ISO-8859-8 inside the AbiWord fonts directory. </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">The name of this directory has to correspond exactly to the encoding reported by your locale variables. </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">If you are using Bash, try</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# echo $LANG</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">You should see something like </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">	</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"># iw_IL.ISO-8859-8</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">It is important that the encoding (the part after the dot) is specified </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">explicitly</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">, i.e., if you see something like</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">	</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"># iw_IL</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">it will not work. Setting the LANG variable prior to starting AbiWord is easy, in Bash you do something like</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">	</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"># LANG=iw_IL.ISO-8859-8</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	# export $LANG</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">You do not have to make a system-wide modification of your $LANG setting, all that is needed is that the variable is set prior to running AbiWord. I personally use a short script to run Czech localization of AbiWord which I call </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">abicz</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> and which looks something like this:</c></p>
<p style="Normal" props="margin-top:6pt; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">	</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">#!/bin/sh</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	LANG=cs_CZ.ISO-8859-2</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	export $LANG</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:6pt; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">	abiword</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">This way I do not have to change my normal LANG setting, and do not have to remember modifying it manually when I want to run Czech localization of AbiWord.</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">If you are adding a TTF type of font, then all you need to do now is to follow the instructions in the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><a xlink:href="#ttf"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">TTF installation guide</c></a><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> above, except instead of the fonts directory, you install the fonts into the locale specific directory.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">If you are using pfa or pfb fonts, you too need to follow the instructions in the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><a xlink:href="#pfa"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">pfa/pfb section</c></a><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> above, but also do a couple of extra things. First, when adding the entry for the font to </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.scale</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> (and </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">) make sure that the font encoding, i.e., the last two parts of the line separated by a dash are set to </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">adobe-fontspecific</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">. Then you have to create a file called </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.alias</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> in where you alias the font to the actual encoding it is for. For instance if your font called BLAH is for </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">iso8859-8</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">, the entry in </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.scale/fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> should look something like:</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">blah.pfa -...-BLAH-.........-adobe-fontspecific</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">(the dots stand for whatever makes up your specific entry). You then have to create a </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.alias </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">file, which should contain the following line:</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">"-...-BLAH-.........-iso8858-8"   "-...-BLAH-.........-adobe-fontspecific"</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">As far as the fonts are concerned, that's all. However, you may want to have a look at the section </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><a xlink:href="#keyboard"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">Keyboard Related Problems</c></a><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"> </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">that deals with some other problems that you may face. Otherwise you can start AbiWord, and the new fonts should appear in the font combo box.</c></p>
<p style="Heading 3"><c props="lang:en-US">Unicode peculiarities</c><c props="lang:en-US"></c></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">While AbiWord does not provide a complete support for the utf-8 locale, it is capable of handling documents containing arbitrary characters from the UCS-2 character set if the locale encoding is set to utf-8. However, it can only do so with Unicode fonts. To make the X system to treat a font as a Unicode font, you need to specify the encoding in the XLFD (the entry in the </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.dir</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">/</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.scale</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> file) as </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">iso10646-1</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">. To see if your font is treated as a Unicode font run</c><c props="lang:en-US"> </c></p>
<p style="Normal" props="margin-bottom:6pt; margin-top:6pt"><c props="lang:en-US">	</c><c props="lang:en-US"></c><c props="font-weight:bold; lang:en-US">#xlsfonts -ll -fn font_name</c></p>
<p style="Normal"><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">This will dump out lot of information about your font, and somewhere among it should be values </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"></c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">min_byte1</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman"> and </c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman; font-style:italic">max_byte1</c><c props="lang:en-US; font-size:12pt; font-family:Times New Roman">; if both of these are 0, then your font is being treated as 8-bit only font. In my experience it is not possible to use a pfa Type 1 or 2 font under XFree86 4 as a proper Unicode font (if you know how to make XFree treat a pfa font as a Unicode font, please let me know so that I can update this document), which means that you will be limited to TTF fonts only.</c></p>
<p style="Heading 3"><bookmark type="start" name="CJK_fonts"/><bookmark type="end" name="CJK_fonts"/>Fonts With CJK Locales</p>
<p style="Normal"><c props="font-family:Times New Roman; font-size:12pt">The procedure for CJK locales is entirely different, the following instructions come from several emails to the AbiWord developer list by Anthony Fok of </c><c props="font-family:Times New Roman; font-size:12pt"></c><a xlink:href="http://www.thizlinux.com"><c props="font-family:Times New Roman; font-size:12pt">thislinux.com</c></a><c props="font-family:Times New Roman; font-size:12pt">:</c></p>
<p style="Normal" props="margin-left:0.5000in"><c props="font-family:Times New Roman; font-size:12pt"></c></p>
<p style="Normal" props="margin-left:0.5000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">AbiWord support GB2312 and other CJK encodings. However, do not try to use ttftool; you'll have to create your own /usr/share/AbiSuite/fonts/zh-CN/fonts.dir . This file is already created for you if you use: Debian GNU/Linux (pre-3.0) Red Hat Linux 7.3 Thiz Linux Desktop 5.0 or 6.0 and maybe for Mandrake 8.2 too. I'm not sure. :-). You may be able to find a working AbiWord 0.99.* or 1.0.1 RPM package by Mandrake or CLE (Chinese GNU/Linux Extension Project) developers. </c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-left:0.5000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-left:0.5000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">If not, you may have to make your own fonts/zh-CN/fonts.dir. If so, try this: </c></p>
<p style="Normal" props="margin-left:0.5000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c><a xlink:href="http://people.debian.org/~ygh/zh_CN/html/noframe"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">http://people.debian.org/~ygh/zh_CN/html/noframes/node5.html</c></a><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"> </c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">The actual font names may be slightly different, but the concept is the same. :-)</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">Note that the sample fonts.dir in the current Debian Chinese FAQ may not be entirely accurate. Also, the PostScript and XLFD names may differ on different distributions. One thing to note is the following "match" is recommended: </c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">	zh-TW/fonts.dir: -ETen-B5-H, -big5-0 </c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">	zh-CN/fonts.dir: -GB-EUC-H, -gb2312.1980-0 </c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">	zh-CN.GB2312/fonts.dir: -GB-EUC-H, -gb2312.1980-0 </c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">	zh-CN.GBK/fonts.dir: -GBK-H, -gbk-0 </c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">	zh-CN.GB18030/fonts.dir: -GBK2K-H, -gb18030-0 </c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">	zh-HK/fonts.dir: -HKscs-B5-H, -big5hkscs-0 </c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.5000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal">again, the XLFD encoding names for gbk, gb18030 and big5hkscs may differ on different systems. Something like that. :-) Some Linux distributions (and probably FreeBSD too) either come with default zh-*/fonts.dir files, or generate them with TTFM or Defoma or other font management framework. In those cases, CJK support should more or less work out-of-the-box. </c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-weight:normal; text-position:normal; text-decoration:none; font-family:Times New Roman; font-size:12pt; font-style:normal"></c></p>
<p style="Heading 2"><bookmark type="start" name="trouble"/><bookmark type="end" name="trouble"/><c props="list-tag:1246733587; lang:en-US">Trouble in Paradise</c><c props="list-tag:1246733587; lang:en-US"></c></p>
<p style="Heading 3"><bookmark type="start" name="circles"/><bookmark type="end" name="circles"/><c props="list-tag:1246733587; lang:en-US">My Fonts for Encoding XXX Print as Circles but Display Correctly</c><c props="list-tag:1246733587; lang:en-US"></c></p>
<p style="Normal"><c props="lang:en-US; font-weight:bold; list-tag:1246733587">Symptoms:</c><c props="lang:en-US; font-weight:bold; list-tag:1246733587"></c><c props="lang:en-US; font-weight:normal; list-tag:1246733587"> </c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">you installed a custom pfa/pfb font for some other encoding than Latin-1 (commonly ISO-8859-2) and while everything works fine on the screen you get circles in place of some of the (accented) characters when you print the document out. The font works fine with other applications. (</c><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">NB:</c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587"> if you are seeing the circles on the screen, than that is a </c><a xlink:href="#circles_screen"><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">different problem</c></a><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">.)</c></p>
<p style="Normal"></p>
<p style="Normal"><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">Diagnosis:</c><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt; list-tag:1246733587"></c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587"> While this problem can sometimes be keyboard-related</c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587; font-style:normal"> most likely it is caused by your font</c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">. To decide which it is, you should carry out the following test. </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; list-tag:1246733587; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">Create a new AbiWord document and type couple of letters from your language (those that appear printed as circles). Save the document in the abw format and then open it with a plain text editor. At the start of the document there is a kind of a header, and then later on you will find your characters in between a pair of &lt;c&gt;&lt;/c&gt; tags. In a normal AbiWord document created under an 8-bit locale each of these characters should be represented by a single byte, and most likely you will be able to read them. If this is the case, then read on. However, if you find instead that the characters are represented by &amp;#xXXXX tokens (where XXXX is the Unicode value of the character), then your problem is keyboard related and you should see </c><a xlink:href="#keyboard"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; list-tag:1246733587; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">Keyboard Related Problems</c></a><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; list-tag:1246733587; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"> </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; list-tag:1246733587; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">below.</c></p>
<p style="Normal" props="margin-top:6pt"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; list-tag:1246733587; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Cause: </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; list-tag:1246733587; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; list-tag:1246733587; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">your font is broken. It </c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">was probably created by modifying an original Latin-1 font, and while the person doing the modification changed the glyphs, s/he did not change the glyph names. It works with other (8-bit) applications because they use 8-bit character codes to access the glyphs, assuming that the first 256 glyphs in the font and its metric file are ordered according to the encoding of the current locale. This assumption is unsafe and AbiWord cannot afford to make it, because we support other than 8-bit locales and fonts that contain many more glyphs than the 256 that a 8-bit application would use </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; list-tag:1246733587; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">(for instance the MS Times New Roman font contains around 1200 glyphs).</c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587"> The only reliable way we can retrieve the metrics information about the glyph from the font's metric file is by using the name of the glyph. In case of a pfa/pfb font, Adobe specifies an unambiguous conversion between its standard glyph names and Unicode, and we use this to translate the Unicode value into a glyph name. If the glyphs in your font are misnamed, the glyph which according to the Adobe's PostScript standard we should be looking for is not found in the font, and we draw a small circle in the place.</c></p>
<p style="Normal"></p>
<p style="Normal" props="font-family:Times New Roman; font-size:12pt"><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">Solution: </c><c props="lang:en-US; font-weight:bold; font-family:Times New Roman; font-size:12pt; list-tag:1246733587"></c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">while this is not AbiWord's fault, we have provided a workaround for such broken fonts. You need to create a u2g file with a name identical with the name of the font, i.e., if your font is called </c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587; font-style:italic">amaretto.pfa</c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">, you need a file called </c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587; font-style:italic">amaretto.u2g</c><c props="lang:en-US; font-weight:normal; font-family:Times New Roman; font-size:12pt; list-tag:1246733587">. Here you have to specify the mapping from glyph names to Unicode values that your font uses. Any lines in the u2g file starting with # will be considered a comment and ignored, the first non-comment line must contain the count of the map entries (i.e., lines) to follow. Each individual entry consists of the glyph name followed by a comma and then a hexadecimal Unicode value. Each entry must be on a single line, and they have to be sorted alphabetically by the glyph name. You can use adobe-full.u2g, located in the fonts directory as a sample. If you have multiple fonts that all use the same wrong glyph names, you only need to create one such file, and just create symbolic links to it for the rest of the fonts. If all fonts in your directory used the same wrong glyph names, you do not need to create symbolic links, just call the file locale.u2g.</c></p>
<p style="Heading 3" props="keep-with-next:yes"><bookmark type="start" name="circles_screen"/><bookmark type="end" name="circles_screen"/>When I Type I Get Small Circles on the Screen</p>
<p style="Normal" props="keep-with-next:yes"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">Symptoms: </c><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><c props="font-weight:normal; font-family:Times New Roman; font-size:12pt">as you type, instead of some/all letters you only get to see small circles on the screen.</c></p>
<p style="Normal" props="keep-with-next:yes"></p>
<p style="Normal" props="keep-with-next:yes"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">Diagnosis: </c><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">this problem can be either keyboard-related, or it is caused by your font. To decide which it is, you should carry out the following test. Create a new AbiWord document and type couple of letters from your language (those that appear printed as circles). Save the document in the abw format and then open it with a plain text editor. At the start of the document there is a kind of a header, and then later on you will find your characters in between a pair of &lt;c&gt;&lt;/c&gt; tags. In a normal AbiWord document created under an 8-bit locale each of these characters should be represented by a single byte, and most likely you will be able to read them. If this is the case, then read on. However, if you find instead that the characters are represented by &amp;#xXXXX tokens (where XXXX is the Unicode value of the character), then your problem is keyboard related and you should see </c><a xlink:href="#keyboard"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">Keyboard Related Problems </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">below</c></a><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">.</c></p>
<p style="Normal" props="keep-with-next:yes"></p>
<p style="Normal" props="keep-with-next:yes"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">Cause:</c><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><c props="font-weight:normal; font-family:Times New Roman; font-size:12pt"> the small circle is an indication that the requested glyph was not found in the current font. You might be, for instance, asking for a character from Latin 2 set while you have only </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">the default Latin 1 fonts </c><c props="font-weight:normal; font-family:Times New Roman; font-size:12pt">installed.</c></p>
<p style="Normal" props="keep-with-next:yes; margin-top:6pt"><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt">Solution: </c><c props="font-weight:bold; font-family:Times New Roman; font-size:12pt"></c><c props="font-weight:normal; font-family:Times New Roman; font-size:12pt">If you want to use AbiWord with a locale that requires different encoding than Latin 1 you have provide your own fonts. You need to follow the procedure described in </c><a xlink:href="#fonts"><c props="font-weight:normal; font-family:Times New Roman; font-size:12pt; font-style:italic">Adding and Removing AbiWord's Fonts</c></a><c props="font-weight:normal; font-family:Times New Roman; font-size:12pt; font-style:normal">, including the instructions found in the section </c><a xlink:href="#non_latin1"><c props="font-weight:normal; font-family:Times New Roman; font-size:12pt; font-style:italic">Locales Other than Latin 1</c></a><c props="font-weight:normal; font-family:Times New Roman; font-size:12pt; font-style:normal">.</c></p>
<p style="Heading 3"><bookmark type="start" name="font_mess"/><bookmark type="end" name="font_mess"/><c props="list-tag:250841845; lang:en-US">"</c><c props="list-tag:250841845; lang:en-US"></c><c props="lang:en-US">Abiword Messes Up My Fonts"  Problem</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Symptoms:</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> when I start up application XXX while AbiWord is running, its fonts go pear-shape; in the more extreme case, this happens even when AbiWord is not running.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Cause:</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> there are fonts on your system that have names identical to the names of some of AbiWord's fonts, and the application XXX is using the AbiWord fonts instead of the fonts it used to use.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Solution: </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">If you do not want the other applications to use AbiWord fonts, you have to make AbiWord use the fonts that are already available on your system; AbiWord can handle  Type1 and TrueType fonts. Here come the step-by-step instructions:</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(1)</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Change to the AW font directory, usually </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">/usr/share/AbiSuite/fonts</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> or </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">/usr/local/AbiSuite/fonts</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(2)</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Open the file </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">in your favorite text editor.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(3)</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Identify the offending font(s). Say, for instance, that you have the nice MS Arial font installed, but AbiWord is causing your applications to use some other Arial you think is much uglier. In that case locate the line following lines:</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">n019003l.pfa    -AbiSource-Arial-regular-r-normal--0-0-0-0-p-0-iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">n019004l.pfa    -AbiSource-Arial-bold-r-normal--0-0-0-0-p-0-iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">n019023l.pfa    -AbiSource-Arial-regular-i-normal--0-0-0-0-p-0-iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">n019024l.pfa    -AbiSource-Arial-bold-i-normal--0-0-0-0-p-0-iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">and change them to whatever is appropriate for your font (since you have the font installed somewhere, there is also a </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">file in that directory with all the information you need); in the Arial case should be something like:</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">arial.ttf      -monotype-Arial-medium-r-normal--0-0-0-0-p-0-iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">arialb.ttf    -monotype-Arial-bold-r-normal--0-0-0-0-p-0-iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">ariali.ttf     -monotype-Arial-medium-i-normal--0-0-0-0-p-0-iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">arialbi.ttf   -monotype-Arial-bold-i-normal--0-0-0-0-p-0-iso8859-1</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt">(Rather than copying this, you should find the </c><c props="font-family:Times New Roman; font-size:12pt"></c><c props="font-size:12pt; font-family:Times New Roman; font-style:italic">fonts.dir</c><c props="font-size:12pt; font-family:Times New Roman; font-style:normal"> file on your system in which the font is listed and copy its contents.)</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(4)</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> Create symbolic links called </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">arial.ttf</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">, </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">arialb.ttf</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">, etc., in the AbiWord fonts directory, pointing to where you have the actual font files. If the font in question is a Type1 (pfa/pfb) font, you also have to create a symbolic link to the font’s </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">afm</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> file, which should be located in the same directory as the font itself; if the font in question is a TrueType font, as in the example above, you have to follow the instructions in the first section of this document and run the </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">ttfadmin.sh</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> script.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(5)</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> You can do this for all the fonts in the AbiWord </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> file, although replacing the symbol fonts might create problems with the bulleted lists in AbiWord. Also, note that if AbiWord cannot find a font requested by a document, it will try to use </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">Times New Roman</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> instead, and if it cannot find it either, it will take the first font it finds. So, if you get rid off the </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">Times New Roman</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"> </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">entry, make sure that the very first font listed in the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> file is some sensible font (e.g., not a symbol font).</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">(6)</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> If you are not using any of the original fonts, i.e., all the fonts listed in your </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">fonts.dir</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> are physically located somewhere else then in the AbiWord font directory, and are already accessible to your applications through X, it is not necessary or desirable to modify the X font path; to stop AbiWord from doing so, go to </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">Tools-&gt;Preferences</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> and on the </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">Preference Schemes</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> tab clear the </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">Modify Unix Font Path</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> checkbox, and further comment out the the xset fp lines in the AbiWord wrapper script (located in </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">AbiSuite/bin</c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">).</c></p>
<p style="Heading 3"><bookmark type="start" name="keyboard"/><bookmark type="end" name="keyboard"/>Keyboard Related Problems</p>
<p style="Normal"><c props="font-family:Times New Roman; font-size:12pt">Strictly speaking, this section does not belong into a file dealing with font issues, but because of the manifestation of the problem described below, the vast majority of the users will consider this a font problem, and so this is a proper place to deal with the issue.</c><c props="font-family:Times New Roman; font-size:12pt"></c></p>
<p style="Normal"></p>
<p style="Normal"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Symptoms: </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">(1) You are getting small circles instead of  your characters on screen, or you see correct characters on the screen but when you print the document you get small circles for some, many or even all characters. (2) If you try to open your document, created with AbiWord running under your Linux distribution in AbiWord running on Windows, you see garbage.</c></p>
<p style="Normal"></p>
<p style="Normal"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Diagnosis: </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">there is a simple test to carry out. Create a new AbiWord document and type couple of letters from your language. Save the document in the abw format and then open it with a plain text editor. At the start of the document there is a kind of a header, and then later on you will find your characters in between a pair of &lt;c&gt;&lt;/c&gt; tags. In a normal AbiWord document each of these characters should be represented by a single byte, and you should be able to read them. However, if you find instead that the characters are represented by &amp;#xXXXX tokens (where XXXX is the Unicode value of the character), than you are having the problem this section is dealing with, otherwise, you may want to see </c><a xlink:href="#circles"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">My Fonts for Encoding XXX Print as Circles but Display Correctly</c></a>.</p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Cause: </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">It appears that many of the out-of-the-box Linux distributions do not have the keyboard setup correctly if you are using a language other than English. The X system supports a large number of characters, and it has a name for each of them. For instance the Unicode character u05d0, which is the Hebrew letter Aleph, is known to the XFree server as </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">hebrew_aleph</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">. When you want to type Hebrew Aleph, the keyboard has to send this specific character to the X server. The association of a particular key with a particular character is done via what is called </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">xmodmap</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">. This file specifies what character each key on the keyboard generates. For instance, it associates the key which would have ‘t’ on the English keyboard with the letter Aleph on Hebrew keyboard. </c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">The proper way to do this is to assign to this key (key no. 28) the character name </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">hebrew_aleph</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">. When an 8-bit application, such as the terminal requests character input from the X server, the server translates the code </c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:italic; lang:en-US">hebrew_aleph</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"> into the character set the terminal is using, probably ISO-8859-8, and so it will send the terminal code 0x00e0. A Unicode application, in contrast, will request the keycode as is and translate it internally into a Unicode value (either by some extra calls to the X system, or, as AbiWord does, by lookup in internal tables). In our case it translates the code hebrew_aleph into the Unicode value 0x05d0.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">Unfortunately, often instead of using the X character names, the xmodmap assigns the key a numerical value of the character from the 8-bit character set of the language, e.g., in our example the key 28 gets associated with value 0x00e0, i.e., the code for Aleph in ISO-8859-8 character set. The problem with this is that for the X server 0x00e0 is not an Aleph, but the character agrave. Now when an 8-bit application request input from the server, it will send it this numerical value, and everything will appear to be fine. However, when a Unicode application such as AbiWord requests the input, it will also send it this numerical value, which will be internally translated into Unicode, leaving us with Unicode character 0x00e0. Since this character is not found in the ISO-8859-8 fonts which you are probably using if you are wanting Hebrew, you will see a small circle instead (sometimes, if your fonts are misconfigured as well, you will see your text on screen fine, but get only the small circles when trying to print).</c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US"></c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US">Solution: </c><c props="font-family:Times New Roman; text-decoration:none; color:000000; font-size:12pt; text-position:normal; font-weight:bold; font-style:normal; lang:en-US"></c><c props="font-family:Times New Roman; font-size:12pt; color:000000; text-decoration:none; text-position:normal; font-weight:normal; font-style:normal; lang:en-US">You have to fix your keyboard map. How precisely you do this depends on your setup. If you are using some keyboard utility, such as the kikbd that comes with KDE, you will need to fix the keyboard definition files of the utility, if you are using xmod, you need to fix the xmodmap file that contains the keyboard definition. As far as AbiWord is concerned, you have two options; either you can use the character names as described above (you will find the names in the X server’s documentation), or you can assign the key a value 0x0100XXXX where XXXX is the Unicode code of the character (e.g., 0x010005d0 for Hebrew Aleph). This latter method has the advantage that you can assign even characters that X system does not have names for, but you should be aware that not all applications are capable of handling keyboard defined in this way.</c></p>
<p style="Normal" props="margin-top:0.0000in; margin-left:0.0000in; text-indent:0.0000in; dom-dir:ltr; margin-bottom:0.0000in; line-height:1.000000; text-align:left; margin-right:0.0000in"></p>
</section>
</abiword>
